<!doctype html>
<html class="no-js" lang="en-us">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>
     Selecting checked radio button with jQuery and IE8 - Pixelastic 
  </title>
  <meta name="description" content="Personal blog of Tim Carry. Posting mostly on tech-related stuff.">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="/public/css/forms.css">

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>

<body class="layout-reverse theme-base-0b">
  <div class="sidebar">
    <div class="container">
      <div class="sidebar-about">
        <h1><a href="/index.html">Pixelastic</a></h1>
        <p class="lead">Personal blog of Tim Carry. Posting mostly on tech-related stuff.</p>
      </div>

      <ul class="sidebar-nav">
        <li class="sidebar-nav-item">
          <a href="/">Home</a>
        </li>
        <li class="sidebar-nav-item">
          <a href="/about/">About</a>
        </li>
        <li class="sidebar-nav-item">
          <a href="/archive/">Archive</a>
        </li>
      </ul>
      <div class="sidebar-footer">Website code available on <a href="https://github.com/pixelastic/blog.pixelastic.com">GitHub</a></div>
    </div>
  </div>

  <div class="content container">
    <div class="post">
  <h1 class="post-title">Selecting checked radio button with jQuery and IE8</h1>
  <span class="post-date">07 Sep 2011</span>
  <p>Ever tried to select the checked <code>radio</code>button of a form using jQuery ? Well
I did, and hundreds of time before, and never ran into any issues.</p>

<p>Today&#39;s the first time, and it involves my dear friend IE8. Seems like either
jQuery or IE8 had trouble with my <code>radio</code> button selection.</p>

<p>I finally managed to get what I wanted but with a sightly different syntax for
IE8.</p>

<h2>First, the markup</h2>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;form</span> <span class="na">id=</span><span class="s">&quot;myForm&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">&quot;data[Payment][value]&quot;</span> <span class="na">id=</span><span class="s">&quot;payment_1500&quot;</span> <span class="na">type=</span><span class="s">&quot;radio&quot;</span> <span class="na">value=</span><span class="s">&quot;1500&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;payment_1500&quot;</span><span class="nt">&gt;</span>1500<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>

  <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">&quot;data[Payment][value]&quot;</span> <span class="na">id=</span><span class="s">&quot;payment_2000&quot;</span> <span class="na">type=</span><span class="s">&quot;radio&quot;</span> <span class="na">value=</span><span class="s">&quot;2000&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;payment_2000&quot;</span><span class="nt">&gt;</span>2000<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>

  <span class="nt">&lt;input</span> <span class="na">name=</span><span class="s">&quot;data[Payment][value]&quot;</span> <span class="na">id=</span><span class="s">&quot;payment_5000&quot;</span> <span class="na">type=</span><span class="s">&quot;radio&quot;</span> <span class="na">value=</span><span class="s">&quot;5000&quot;</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;payment_5000&quot;</span><span class="nt">&gt;</span>5000<span class="nt">&lt;/label&gt;&lt;br</span> <span class="nt">/&gt;</span>

  <span class="nt">&lt;button</span> <span class="na">id=</span><span class="s">&quot;test&quot;</span><span class="nt">&gt;</span>Select<span class="nt">&lt;/button&gt;</span>
<span class="nt">&lt;/form&gt;</span>
</code></pre></div>
<p>Pretty simple, isn&#39;t it ? I only have three <code>radio</code>buttons, and I would like
to get the selected value when pressing the Select <code>button</code>.</p>

<h2>What should work everywhere</h2>

<p>The following code is pretty straightforward and I expected it to just work.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">selected1</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#myForm input[name=&quot;data\\[Payment\\]\\[value\\]&quot;]:checked&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">value1</span> <span class="o">=</span> <span class="nx">selected1</span><span class="p">.</span><span class="nx">val</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value1</span><span class="p">);</span>
</code></pre></div>
<p>Note that we have to double escape the <code>[</code> and <code>]</code> characters and wrap in
quotes the <code>name</code>value. Nothing fancy, just classic string protection. This
code works perfectly on Firefox and Chrome, and I deployed it in production
for a few weeks.</p>

<p>Then, I got report of users that would have love to use the form, but got an
error because no value was selected. I tested and tested it again without
finding the cause. Then it occurs to me that all those reports came from user
using IE8.</p>

<p>So I rebooted my VM, launched IE8 and was able to reproduce the bug on my
first try.</p>

<h2>What the heck is IE8 doing ?</h2>

<p>Well, that&#39;s a deep question, and I&#39;ve ask this myself countless times before.
Once more, IE is doing things in its own weird way.</p>

<p>After some fiddling, I managed to make it work, by just slightly altering the
syntax.</p>
<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">var</span> <span class="nx">selected2</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#myForm input[name=&quot;data\\[Payment\\]\\[value\\]&quot;]&#39;</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="s1">&#39;:checked&#39;</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">value2</span> <span class="o">=</span> <span class="nx">selected2</span><span class="p">.</span><span class="nx">val</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value2</span><span class="p">);</span><span class="err"> </span>
</code></pre></div>
<p>Yep, that&#39;s right, I simply moved the <code>:checked</code> selector in its own <code>filter
</code>call and it worked. Took me a while to figure, but this finally turned out to
be an easy fix.</p>

<p>You can test it yourself with <a href="http://jsfiddle.net/pixelastic/WS53Q/1/">this jsFiddle
example</a>. Don&#39;t forget to enable the
log panel in IE8 by pressing F12 before running the code.</p>

  <div class="tag-list">
    
      <a href="/tags/jquery">#jquery</a>
    
      <a href="/tags/radio">#radio</a>
    
      <a href="/tags/ie8">#ie8</a>
    
      <a href="/tags/checked">#checked</a>
    
  </div>
</div>

<!-- <div class="related"> -->
<!--   <h2>Related Posts</h2> -->
<!--   <ul class="related-posts"> -->
<!--      -->
<!--       <li> -->
<!--         <h3> -->
<!--           <a href="/2014/01/07/utf-8-encoding-included-jsp-files/"> -->
<!--             UTF-8 encoding for included .jsp files -->
<!--             <small>07 Jan 2014</small> -->
<!--           </a> -->
<!--         </h3> -->
<!--       </li> -->
<!--      -->
<!--       <li> -->
<!--         <h3> -->
<!--           <a href="/2013/09/27/understanding-nginx-location-blocks-rewrite-rules/"> -->
<!--             Understanding nginx location blocks and rewrite rules -->
<!--             <small>27 Sep 2013</small> -->
<!--           </a> -->
<!--         </h3> -->
<!--       </li> -->
<!--      -->
<!--       <li> -->
<!--         <h3> -->
<!--           <a href="/2013/09/09/telecharger-parisweb-2012-sous-forme-de-podcasts/"> -->
<!--             Télécharger ParisWeb 2012 sous forme de podcasts -->
<!--             <small>09 Sep 2013</small> -->
<!--           </a> -->
<!--         </h3> -->
<!--       </li> -->
<!--      -->
<!--   </ul> -->
<!-- </div> -->

  </div>

</body>

</html>
