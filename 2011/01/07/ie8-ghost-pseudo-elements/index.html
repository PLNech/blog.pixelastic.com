<!doctype html>
<html class="no-js" lang="en-us">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>
     IE8 ghost :after and :before pseudo elements - Pixelastic 
  </title>
  <meta name="description" content="Personal blog of Tim Carry. Posting mostly on tech-related stuff.">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="/public/css/forms.css">

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>

<body class="layout-reverse theme-base-0b">
  <div class="sidebar">
    <div class="container">
      <div class="sidebar-about">
        <h1><a href="/index.html">Pixelastic</a></h1>
        <p class="lead">Personal blog of Tim Carry. Posting mostly on tech-related stuff.</p>
      </div>

      <ul class="sidebar-nav">
        <li class="sidebar-nav-item">
          <a href="/">Home</a>
        </li>
        <li class="sidebar-nav-item">
          <a href="/about/">About</a>
        </li>
        <li class="sidebar-nav-item">
          <a href="/archive/">Archive</a>
        </li>
      </ul>
      <div class="sidebar-footer">Website code available on <a href="https://github.com/pixelastic/blog.pixelastic.com">GitHub</a></div>
    </div>
  </div>

  <div class="content container">
    <div class="post">
  <h1 class="post-title">IE8 ghost :after and :before pseudo elements</h1>
  <span class="post-date">07 Jan 2011</span>
  <p>IE8 has a strange bug (<em>what bugs aren&#39;t strange in IE ?</em>) when dealing with
<code>:after</code> and <code>:before</code> pseudo-elements.</p>

<p>I was adding a nice looking arrow after one of my elements using <code>:after</code>. I
wanted this arrow to only display when my element was hovered, so I wrote the
following code :</p>
<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Example<span class="nt">&lt;/a&gt;</span>
</code></pre></div><div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nt">a</span> <span class="p">{</span>
  <span class="k">position</span><span class="o">:</span><span class="k">relative</span><span class="p">;</span>
  <span class="k">display</span><span class="o">:</span><span class="k">block</span><span class="p">;</span>
  <span class="k">height</span><span class="o">:</span><span class="m">30px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">a</span><span class="nd">:after</span> <span class="p">{</span>
  <span class="k">position</span><span class="o">:</span><span class="k">absolute</span><span class="p">;</span>
  <span class="k">content</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="k">top</span><span class="o">:</span><span class="m">0px</span><span class="p">;</span>
  <span class="k">right</span><span class="o">:-</span><span class="m">15px</span><span class="p">;</span>
  <span class="k">width</span><span class="o">:</span><span class="m">15px</span><span class="p">;</span>
  <span class="k">height</span><span class="o">:</span><span class="m">30px</span><span class="p">;</span>
  <span class="k">background</span><span class="o">:</span><span class="sx">url(arrow.gif)</span> <span class="k">top</span> <span class="k">left</span> <span class="k">no-repeat</span><span class="p">;</span>
  <span class="k">display</span><span class="o">:</span><span class="k">none</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">a</span><span class="nd">:hover:after</span> <span class="p">{</span>
  <span class="k">display</span><span class="o">:</span><span class="k">block</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>As you can see, nothing too fancy. I positionned my arrow using an empty
<code>:after</code> element and a <code>background</code>image. I defaulted the arrow to hidden,
and only show it when hovering the element.</p>

<h2>IE in action</h2>

<p>It does work pretty well in moder browsers. It also seems to work on IE8. When
you hover the element in IE8, the arrow gets displayed. But it does not gets
hidden when you stop hovering it.</p>

<p>There&#39;s a kind of ghost element that keeps getting displayed. It gets removed
if you directly mouse it, or scroll your page, or alt-tab, etc. This clearly
is a display artefact.</p>

<p>To counter this I had to write it in an other fashion (less readable in my
opinion). Removing the default <code>a:after</code> rule and adding all properties to
<code>a:hover:after</code> :</p>
<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nt">a</span> <span class="p">{</span>
  <span class="k">position</span><span class="o">:</span><span class="k">relative</span><span class="p">;</span>
  <span class="k">display</span><span class="o">:</span><span class="k">block</span><span class="p">;</span>
  <span class="k">height</span><span class="o">:</span><span class="m">30px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">a</span><span class="nd">:hover:after</span> <span class="p">{</span>
  <span class="k">position</span><span class="o">:</span><span class="k">absolute</span><span class="p">;</span>
  <span class="k">content</span><span class="o">:</span><span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="k">top</span><span class="o">:</span><span class="m">0px</span><span class="p">;</span>
  <span class="k">right</span><span class="o">:-</span><span class="m">15px</span><span class="p">;</span>
  <span class="k">width</span><span class="o">:</span><span class="m">15px</span><span class="p">;</span>
  <span class="k">height</span><span class="o">:</span><span class="m">30px</span><span class="p">;</span>
  <span class="k">background</span><span class="o">:</span><span class="sx">url(arrow.gif)</span> <span class="k">top</span> <span class="k">left</span> <span class="k">no-repeat</span><span class="p">;</span>
  <span class="k">display</span><span class="o">:</span><span class="k">block</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h2>Update</h2>

<p>It should be noted that more generally, I gets confused and create ghost
elements and styling when we try to update the <code>:after</code>/<code>:before</code> properties
based on a rule selecting its parent.</p>

<p>There seems to have a little lag/delay before the properties gets applied, and
most of the time they do not.</p>

  <div class="tag-list">
    
      <a href="/tags/bug">#bug</a>
    
      <a href="/tags/css">#css</a>
    
      <a href="/tags/ghost">#ghost</a>
    
      <a href="/tags/ie8">#ie8</a>
    
      <a href="/tags/before">#before</a>
    
      <a href="/tags/after">#after</a>
    
  </div>
</div>

<!-- <div class="related"> -->
<!--   <h2>Related Posts</h2> -->
<!--   <ul class="related-posts"> -->
<!--      -->
<!--       <li> -->
<!--         <h3> -->
<!--           <a href="/2014/01/07/utf-8-encoding-included-jsp-files/"> -->
<!--             UTF-8 encoding for included .jsp files -->
<!--             <small>07 Jan 2014</small> -->
<!--           </a> -->
<!--         </h3> -->
<!--       </li> -->
<!--      -->
<!--       <li> -->
<!--         <h3> -->
<!--           <a href="/2013/09/27/understanding-nginx-location-blocks-rewrite-rules/"> -->
<!--             Understanding nginx location blocks and rewrite rules -->
<!--             <small>27 Sep 2013</small> -->
<!--           </a> -->
<!--         </h3> -->
<!--       </li> -->
<!--      -->
<!--       <li> -->
<!--         <h3> -->
<!--           <a href="/2013/09/09/telecharger-parisweb-2012-sous-forme-de-podcasts/"> -->
<!--             Télécharger ParisWeb 2012 sous forme de podcasts -->
<!--             <small>09 Sep 2013</small> -->
<!--           </a> -->
<!--         </h3> -->
<!--       </li> -->
<!--      -->
<!--   </ul> -->
<!-- </div> -->

  </div>

</body>

</html>
