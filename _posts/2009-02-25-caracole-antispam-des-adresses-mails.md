---
layout: post
title: "Caracole - Antispam des adresses mails"
custom_v2_id: 16
---

<p><strong>Attention : Ce post n'est plus d'actualité. Je n'utilise plus du tout cette technique pour masquer les adresses mails car elle bloquait complétement la lisibilité aux personnes sans Javascript. Je n'ai pas encoe trouvé de meilleure alternative pour le moment, néanmoins.</strong></p>
<p>Pour faire suite au billet précédent, un autre problème que j'ai rencontré dans le développement des sites était un moyen sûr d'empecher qu'une adresse mail exposée sur un site ne soit récupérée par des robots crawlers et ne deviennent la cible de leurs spams.</p>
<p>Je parse donc chaque texte affiché afin de remplacer les adresses mails par une version cryptée, que Javascript décryptera à l'affichage. A chaque affichage la clé de cryptage est différente. Bon, l'algorithme de cryptage est extremement simple, c'est juste une permutation alphabétique, chaque lettre est remplacée par une autre. Et la clée est indiqué dans l'attribut title de mon code généré.</p>
<p>Il suffit d'étudier le Javascript pour réussir à comprendre comment décrypter les mails, mais cela demande que le robot ai intégré mon codage dans ses paramètres, ce qui n'est à priori pas le cas. Et quand bien même se serait le cas, je changerai la façon de crypter la clé.</p>
<p>Jetez un oeil au code source de cette page si vous le souhaitez pour voir comment cette adresse : blabla@somewhere.com est écrite.</p>
<p>Cela devrait être quelque chose de la forme :</p>
<pre>&lt;<span class="start-tag">span</span><span class="attribute-name"> <br /></span>	<span class="attribute-name">title</span>=<span class="attribute-value">"97tasbw84fv6_q3pn5yirchya15nq.p9b_jziggtc40lfolwxxk@meo26m70zj2d-sur@hev8u1-dk.3" </span><span class="attribute-name"><br /></span>	<span class="attribute-name">class</span>=<span class="attribute-value">"protectFromSpam"</span>&gt;<br />	<br />	&lt;<span class="start-tag">span</span><span class="attribute-name"> class</span>=<span class="attribute-value">"noscript"</span>&gt;<br />		&lt;<span class="start-tag">span</span><span class="attribute-name"> class</span>=<span class="attribute-value">"icon icon_notice"</span>&gt;&lt;/<span class="end-tag">span</span>&gt;<br />		Cette adresse mail est protégée contre le spam, vous devez activer Javascript pour pouvoir la voir.<br />	&lt;/<span class="end-tag">span</span>&gt;<br />	<br />	&lt;<span class="start-tag">span</span><span class="attribute-name"> class</span>=<span class="attribute-value">"cryptedMail"</span>&gt;ageh9gxvw1bag4342e&lt;/<span class="end-tag">span</span>&gt;<br />	<br />&lt;/<span class="end-tag">span</span>&gt;</pre>
<p>Bon alors bien sur, cela nécessite Javascript activé, c'est un gros défaut, je l'admets. Un message permet de ne pas laisser l'utilisateur sans JS dans l'incompréhension, mais ça reste problématique malgré tout. Je n'ai pas réussi à faire mieux pour le moment.</p>