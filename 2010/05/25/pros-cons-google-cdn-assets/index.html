<!doctype html>
<html class="no-js" lang="en-us">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>
     Pros and cons of using Google CDN for your assets - Pixelastic 
  </title>
  <meta name="description" content="Personal blog of Tim Carry. Posting mostly on tech-related stuff.">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="/public/css/forms.css">

  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>

<body class="layout-reverse theme-base-0b">
  <div class="sidebar">
    <div class="container">
      <div class="sidebar-about">
        <h1><a href="/index.html">Pixelastic</a></h1>
        <p class="lead">Personal blog of Tim Carry. Posting mostly on tech-related stuff.</p>
      </div>

      <ul class="sidebar-nav">
        <li class="sidebar-nav-item">
          <a href="/">Home</a>
        </li>
        <li class="sidebar-nav-item">
          <a href="/about/">About</a>
        </li>
        <li class="sidebar-nav-item">
          <a href="/archive/">Archive</a>
        </li>
      </ul>
      <div class="sidebar-footer">Website code available on <a href="https://github.com/pixelastic/blog.pixelastic.com">GitHub</a></div>
    </div>
  </div>

  <div class="content container">
    <div class="post">
  <h1 class="post-title">Pros and cons of using Google CDN for your assets</h1>
  <span class="post-date">25 May 2010</span>
  <p>With the recent Google Fonts breakout, much debate surfaces to know if it
really was useful to use Google CDN to deliver your assets to your users.</p>

<p>I used to think it was a goog thing because it allowed for parallelized
download, but after reading really good articles on the subject I&#39;m not so
sure.</p>

<p>I&#39;ll try to list the pros and cons of using Google CDN instead of serving your
files locally.</p>

<h2>Pros</h2>

<ul>
<li>Using a CDN assure you that your users will get content from the closest server around them, no matter where they are.</li>
<li>The more websites will use Google CDN, the biggest the chance of your user already having the file in its cache</li>
<li>Downloading from a CDN assure that you won&#39;t be sending useless cookies along the request. You shouldn&#39;t send cookies when fetching your static files anyway, but sometime -Google Analytics for example-, some script create domain-wide cookies that still get sent.</li>
<li>Many niched major websites (ArmorGames.com, StackOverflow.com, etc) uses the CDN, so if a large part of your trafic is coming from one of those, using the CDN and the exact same library version will have no perfomance downsides for you.</li>
</ul>

<h2>Cons</h2>

<ul>
<li>Using a CDN create a new connection to access the ressource on an other server instead of using the already open connection to your website. Creating a new connection is slow.</li>
<li>Caching of the files will only be possible if the exact same version url is used. E. using <code>/jquery/1.4.0/</code> instead of <code>/jquery/1.4/</code></li>
<li>If you already are using your own CDN for your images, you should also use it for your javascript and in this case the google one is worthless because you already have all the advantages.</li>
<li>An Internet connection is required. This may seem obvious but if you have to work on a project while on a trip, you&#39;ll need a local copy of the library.</li>
</ul>

<h2>Stalemate</h2>

<ul>
<li>Using a CDN force a DNS lookup. This lookup can be cached if the user already visited your website or another that use the same CDN however.</li>
<li>Browsers have a limit of paralels downloads on the same host. Using a CDN allow for more parallelization. But creating dummy subdomains like <code>static.domain.com</code> would also defeat this limitation.</li>
<li>In the case of Javascript/CSS, packing all your files (scripts and libraries) in one big file on your server and serving it gzipped will result in a better compression that serving the library from a CDN and your scripts from your server. On the other hand, the user would have to re-download the whole package whenever you make a tiny change to your scripts, even if you didn&#39;t changed the library.</li>
<li>Downloading script usually block page execution. So reducing the number of scripts to load (by packing them in one file instead of downloading one locally and one on the CDN) will reduce the blocking time. On the other hand, merging two files will result in a longer download time (because the file is larger) while using the CDN would allow the two scripts to download in parallel.</li>
<li>What happen if your CDN is down ? Well, when using Google that&#39;s not much a risk but still. As a side effect, you should&#39;nt even consider using a CDN if your application is for an intranet.</li>
</ul>

<h2>Conclusion</h2>

<p>As a conclusion, all I can answer to the &quot;Should I use the Google CDN for my
javascript libraries ?&quot; is &quot;Well... it depends...&quot;.</p>

<p>Really it depends on your configuration. Run some tests, try with a CDN or by
compressing the library into your main file. Check where your users are coming
from and the average loading time. Test various configuration until you found
the one that works the best for you.</p>

<p>On a personal note I do use Google CDN for my websites. The cost of the DNS
lookup and connection to the Google server is really worth the parallelized
download in my case. But it may be so because I&#39;m living in France and my
website is hosted in the US, so a CDN really helps.</p>

<h2>Source links</h2>

<ul>
<li>http://docs.google.com/document/pub?id=14Xn7kkKwVxSie6xHJwWRAP5mutM7qlWcrHgWtZo63gI</li>
<li>http://zoompf.com/blog/2010/01/should-you-use-javascript-library-cdns</li>
</ul>

  <div class="tag-list">
    
      <a href="/tags/performance">#performance</a>
    
      <a href="/tags/javascript">#javascript</a>
    
      <a href="/tags/google">#google</a>
    
      <a href="/tags/cdn">#cdn</a>
    
  </div>
</div>

<!-- <div class="related"> -->
<!--   <h2>Related Posts</h2> -->
<!--   <ul class="related-posts"> -->
<!--      -->
<!--       <li> -->
<!--         <h3> -->
<!--           <a href="/2014/01/07/utf-8-encoding-included-jsp-files/"> -->
<!--             UTF-8 encoding for included .jsp files -->
<!--             <small>07 Jan 2014</small> -->
<!--           </a> -->
<!--         </h3> -->
<!--       </li> -->
<!--      -->
<!--       <li> -->
<!--         <h3> -->
<!--           <a href="/2013/09/27/understanding-nginx-location-blocks-rewrite-rules/"> -->
<!--             Understanding nginx location blocks and rewrite rules -->
<!--             <small>27 Sep 2013</small> -->
<!--           </a> -->
<!--         </h3> -->
<!--       </li> -->
<!--      -->
<!--       <li> -->
<!--         <h3> -->
<!--           <a href="/2013/09/09/telecharger-parisweb-2012-sous-forme-de-podcasts/"> -->
<!--             Télécharger ParisWeb 2012 sous forme de podcasts -->
<!--             <small>09 Sep 2013</small> -->
<!--           </a> -->
<!--         </h3> -->
<!--       </li> -->
<!--      -->
<!--   </ul> -->
<!-- </div> -->

  </div>

</body>

</html>
